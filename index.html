<!doctype html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8">
    <title>Tone tester</title>
    <style>
      body {
        background: #FFFFFF;
        margin: 5pt;
      }
      .tone-form {
        display: flex;
        flex-direction: column;
        gap: 8px;
        max-width: 320px;
      }
      .tone-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      button {
        background-image: linear-gradient(#0dccea, #0d70ea);
        border: 0;
        border-radius: 4px;
        box-shadow: rgba(0, 0, 0, .3) 0 3px 10px;
        box-sizing: border-box;
        color: #fff;
        cursor: pointer;
        font-family: Montserrat,sans-serif;
        font-size: .9em;
        margin: 0;
        padding: 10px 15px;
        text-align: center;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
      }
    </style>
  </head>
  <body>
    <audio id="tone1d" src="tones/1d.wav" preload="auto"></audio>
    <audio id="tone2d" src="tones/2d.wav" preload="auto"></audio>
    <audio id="tone3d" src="tones/3d.wav" preload="auto"></audio>
    <audio id="tone4d" src="tones/4d.wav" preload="auto"></audio>
    <audio id="tone5d" src="tones/5d.wav" preload="auto"></audio>
    <audio id="tone6d" src="tones/6d.wav" preload="auto"></audio>
    <audio id="tone7d" src="tones/7d.wav" preload="auto"></audio>
    <audio id="tone8d" src="tones/8d.wav" preload="auto"></audio>
    <audio id="tone9d" src="tones/9d.wav" preload="auto"></audio>

    <form
      class="tone-form"
      method="post"
      action="https://script.google.com/macros/s/AKfycbyrf0FGkVvGaLAFwXQAlMY79_hIGB7fPmCBHa1JgkaChBEe52Lm9vYDXeKA4q1Pn6U/exec"
      onsubmit="return confirm('Submit selected tones?');"
    >
      <div>Dual tones</div>

      <div id="tone-rows"></div>

      <button type="submit">Submit</button>
    </form>

    <script>
      function play_tone_duo(c) {
        var tonec = document.getElementById("tone" + c + "d");
        tonec.play();
      }

      function shuffle(array) {
        for (var i = array.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
        return array;
      }

      function renderToneRows() {
        var rowsContainer = document.getElementById("tone-rows");
        var toneIds = [1, 2, 3, 4, 5, 6, 7, 8, 9];
        var shuffledToneIds = shuffle(toneIds.slice());

        for (var labelNumber = 1; labelNumber <= shuffledToneIds.length; labelNumber++) {
          var toneId = shuffledToneIds[labelNumber - 1];

          var row = document.createElement("div");
          row.className = "tone-row";

          var checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.name = "tone" + toneId;
          checkbox.id = "checkbox-tone" + toneId;

          var button = document.createElement("button");
          button.id = "tone" + toneId;
          button.type = "button";
          button.textContent = "Tone " + labelNumber;
          button.onclick = (function (id) {
            return function () {
              play_tone_duo(id);
            };
          })(toneId);

          row.appendChild(checkbox);
          row.appendChild(button);
          rowsContainer.appendChild(row);
        }
      }

      renderToneRows();
    </script>
  </body>
</html>
